<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title</title>
    @RenderSection("metatags", false)

    <!-- Favicons
    ================================================== -->
    <link rel="shortcut icon" href="~/Content/Default/img/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="~/Content/Default/img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="~/Content/Default/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="~/Content/Default/img/apple-touch-icon-114x114.png">
    <!-- Bootstrap -->
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Content/admin/icomoon/icomoon.css" rel="stylesheet" />
    <!-- tagsinput
    ================================================== -->
    <link href="~/Content/Default/Plugin/bootstrap-tagsinput.css" rel="stylesheet" />
    <!-- Stylesheet
    ================================================== -->
    @*<link rel="stylesheet" type="text/css" href="~/Content/Default/css/style.css">
    <link rel="stylesheet" type="text/css" href="~/Content/Default/css/responsive.css">*@
    @Styles.Render("~/Content/Default/mainstyle")
    @RenderSection("Styles", false)
    <!-- Google Fonts
    ==================================================-->
    @*<link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css'>*@ 
    <script type="text/javascript" src="~/Content/Default/js/modernizr.custom.js"></script>
    <!-- js -->
    <link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-1.12.4.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Content/Default/Plugin/bootstrap-tagsinput.min.js"></script>
    <script src="~/Content/Default/js/eModal.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="~/Content/Default/js/jquery.jcarousellite.min.js"></script>
    <link href="~/Content/fancybox/jquery.fancybox.css" rel="stylesheet" />
    <script src="~/Content/fancybox/jquery.mousewheel-3.0.6.pack.js"></script>
    <script src="~/Content/fancybox/jquery.fancybox.pack.js"></script>
    <script src="~/Content/jwplayer-7.6.1/jwplayer.js"></script>
    <script>jwplayer.key = "qy2CZymHTsZ8+j3bxA32LfiAkawhCMTtzFPBlA==";</script>
    <script src="~/Scripts/jquery-ui-1.12.0.min.js"></script>
    <script src="~/Scripts/jquery.ui.datepicker-vi-VN.js"></script>
</head>
<body>
    @{ Html.RenderAction("_HeaderPartial", "Layout"); }
    @{ Html.RenderAction("_MenuTopPartial", "Layout"); }
    @{ Html.RenderAction("_BelowMenuPartial", "Layout"); }

    <!-- Home Section
    ================================================== -->
    <div id="tf-home">
        <div class="overlay-2">
            <div class="container">
                <div class="row" style="background: #fff;">
                    <div class="col-md-8 col-md-push-2" id="tf-content">
                        @RenderBody()
                    </div>
                    <div class="col-md-2 col-md-pull-8" id="tf-col-left">
                        <div class="menu-hoidap">
                            <h3 class="menu-title">Hỏi đáp</h3>
                            <ul>
                                <li>
                                    <a href="/hoi-dap"><i class="fa icon-question"></i> Đặt câu hỏi</a>
                                </li>
                                <li>
                                    <a href="/tra-cuu-cau-hoi"><i class="fa icon-search"></i> Tra cứu câu hỏi</a>
                                </li>
                            </ul>
                        </div>

                        @{ Html.RenderAction("_MenuLinhVucPartial", "Layout"); }


                        @{ Html.RenderAction("_ModuleLeftPartial", "Layout");}
                        @*<div class="panel panel-primary tf-module">
                                <div class="panel-heading">
                                    <h3 class="panel-title">Liên kết web</h3>
                                </div>
                                <div class="panel-body">

                                </div>
                            </div>*@
                    </div>
                    <div class="col-md-2" id="tf-col-right">
                        @{ Html.RenderAction("_ModuleRightPartial", "Layout");}
                        <div class="panel panel-primary tf-module">
                            <div class="panel-heading">
                                <h3 class="panel-title">Bình chọn</h3>
                            </div>
                            <div class="panel-body">
                                @using (Html.BeginForm("Votes", "Home", FormMethod.Post, new { @class = "form-horizontal", role = "form", @id = "form-vote" }))
                                {

                                    <div class="form-group">
                                        <label>Xin ý kiến về giao diện</label>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="OptionsVote" id="Normal" value="normal" checked>
                                                Chưa đẹp lắm
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="OptionsVote" id="Good" value="good">
                                                Đẹp rồi
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="OptionsVote" id="VeryGood" value="verygood">
                                                Rất là đẹp
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <input type="submit" id="form-vote-submit" name="submit" value="Bình chọn" class="btn btn-primary" />
                                        <a id="viewResultVote" href="#" class="btn btn-default">Xem kết quả</a>
                                    </div>
                                }
                            </div>
                        </div>
                        <script>

                            $(document).ready(function () {
                                $('#viewResultVote').on('click', function (e) {
                                    e.preventDefault();
                                    var option = {
                                        url: "/Home/IframeResultVote",
                                        title: 'Xin ý kiến về giao diện',
                                        buttons: null
                                    };
                                    eModal.ajax(option);
                                })

                                $("#form-vote").submit(function (e) {

                                    var url = "/Home/Votes"; // the script where you handle the form input.

                                    $.ajax({
                                        type: "POST",
                                        url: url,
                                        data: $("#form-vote").serialize(), // serializes the form's elements.
                                        success: function (data) {
                                            var $mesage = "";
                                            if (data !== false) {
                                                $mesage = '<p class="text-success">Cám ơn bạn đã bình chọn.</p>';
                                            } else {
                                                $mesage = '<p class="text-success">Bạn đã gửi bình chọn.</p>';
                                            }
                                            $("#form-vote").prepend($mesage).fadeIn('200');
                                            $('#form-vote').children('p').on('click', function () {
                                                $(this).fadeOut('200');
                                            });
                                            $('#form-vote-submit').prop('disabled', true)
                                            //alert(data); // show response from the php script.
                                        }
                                    });

                                    e.preventDefault(); // avoid to execute the actual submit of the form.
                                });
                            })
                        </script>

                        <div class="panel panel-primary tf-module">
                            <div class="panel-heading">
                                <h3 class="panel-title">Thống kê truy nhập</h3>
                            </div>
                            <div class="panel-body">
                                <p><b>Số khách trực tuyến: </b><span id="usersCount"></span></p>
                                <p><b>Tổng số truy cập: </b><span id="totalAccess"></span></p>
                                <script src="~/Scripts/jquery.signalR-1.1.4.min.js"></script>
                                <script src="/signalr/hubs" type="text/javascript"></script>
                                <script>
                                    $(function () {
                                        // Reference the auto-generated proxy for the hub.
                                        var userActivity = $.connection.userActivityHub;
                                        // Create a function that the hub can call back to display messages.
                                        userActivity.client.updateUsersOnlineCount = function (count) {
                                            // Add the message to the page.
                                            $('#usersCount').text(count);
                                        };
                                        $.connection.hub.start();
                                    });

                                    setTimeout(function () {
                                        $.ajax({
                                            url: "/Layout/Logs",
                                            cache: false
                                        }).done(function (html) {
                                            $('#totalAccess').text(html);
                                        });
                                    }, 3000);

                                </script>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @{ Html.RenderAction("_MenuBottomPartial", "Layout"); }
    @{ Html.RenderAction("_FooterPartial", "Layout"); }

    <div class="totop">
        <span class="fa fa-3x fa-angle-up"></span>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins)
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Parallax Effects -->
    <script type="text/javascript" src="~/Content/Default/js/skrollr.js"></script>
    <script type="text/javascript" src="~/Content/Default/js/imagesloaded.js"></script>
    @RenderSection("scripts", required: false)
    <!-- Javascripts
    ================================================== -->
    <script type="text/javascript" src="~/Content/Default/js/main.js"></script>  

</body>



</html>
